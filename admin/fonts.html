<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…Ø¯ÛŒØ±ÛŒØª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap RTL -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />

  <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ± -->
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" />

  <!-- Ø§Ø³ØªØ§ÛŒÙ„ Ø³ÙØ§Ø±Ø´ÛŒ -->
  <link rel="stylesheet" href="css/style.css" />
</head>
<body style="font-family: Vazir, sans-serif; background-color: #f8f9fa;">

  <!-- Ù†ÙˆØ§Ø± Ø¨Ø§Ù„Ø§ -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary px-3">
    <a class="navbar-brand text-white" href="index.html"> ğŸ“˜ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</a>
  </nav>

  <div class="container-fluid">
    <div class="row">
     <!-- Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± -->
      <div class="col-md-2 bg-white shadow-sm pt-4" style="min-height: 100vh;">
        <ul class="nav flex-column">
          <li class="nav-item"><a class="nav-link text-dark" href="index.html">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="fonts.html">Ù…Ø¯ÛŒØ±ÛŒØª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="orders.html">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="users.html">Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="comments.html">Ù†Ø¸Ø±Ø§Øª</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="discounts.html">Ú©Ø¯Ù‡Ø§ÛŒ ØªØ®ÙÛŒÙ</a></li>
          <li class="nav-item"><a class="nav-link active" href="blog.html">ÙˆØ¨Ù„Ø§Ú¯</a></li>
       
        </ul>
      </div>

      <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
      <div class="col-md-10 p-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
          <h3 class="text-primary">Ù…Ø¯ÛŒØ±ÛŒØª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§</h3>
          <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#fontModal">+ Ø§ÙØ²ÙˆØ¯Ù† ÙÙˆÙ†Øª Ø¬Ø¯ÛŒØ¯</button>
        </div>

        <!-- Ø¬Ø³ØªØ¬Ùˆ Ùˆ ÙÛŒÙ„ØªØ± -->
        <div class="row mb-3">
          <div class="col-md-6">
            <input id="searchInput" type="text" class="form-control" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ ÙÙˆÙ†Øª..." />
          </div>
          <div class="col-md-3">
            <select id="filterCategory" class="form-select">
              <option value="">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§</option>
              <option value="Ø¯Ø³Øªâ€ŒÙ†ÙˆÛŒØ³">Ø¯Ø³Øªâ€ŒÙ†ÙˆÛŒØ³</option>
              <option value="Ø³Ø±ÛŒÙÛŒ">Ø³Ø±ÛŒÙÛŒ</option>
              <option value="Ø³Ø§Ù†Ø³â€ŒØ³Ø±ÛŒÙ">Ø³Ø§Ù†Ø³â€ŒØ³Ø±ÛŒÙ</option>
              <!-- Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ± Ø§ÛŒÙ†Ø¬Ø§ -->
            </select>
          </div>
          <div class="col-md-3">
            <select id="filterStatus" class="form-select">
              <option value="">Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§</option>
              <option value="Ø±Ø§ÛŒÚ¯Ø§Ù†">Ø±Ø§ÛŒÚ¯Ø§Ù†</option>
              <option value="ØªØ®ÙÛŒÙâ€ŒØ¯Ø§Ø±">ØªØ®ÙÛŒÙâ€ŒØ¯Ø§Ø±</option>
              <option value="ÙˆÛŒÚ˜Ù‡">ÙˆÛŒÚ˜Ù‡</option>
            </select>
          </div>
        </div>

        <!-- Ø¬Ø¯ÙˆÙ„ Ù„ÛŒØ³Øª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ -->
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle">
            <thead class="table-primary">
              <tr>
                <th>Ù†Ø§Ù… ÙÙˆÙ†Øª</th>
                <th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th>
                <th>Ù‚ÛŒÙ…Øª</th>
                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                <th>Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</th>
                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
              </tr>
            </thead>
            <tbody id="fontsTableBody">
              <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ -->
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>

  <!-- Ù…Ø¯Ø§Ù„ Ø§ÙØ²ÙˆØ¯Ù†/ÙˆÛŒØ±Ø§ÛŒØ´ ÙÙˆÙ†Øª -->
  <div class="modal fade" id="fontModal" tabindex="-1" aria-labelledby="fontModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <form id="fontForm" enctype="multipart/form-data">
          <div class="modal-header">
            <h5 class="modal-title" id="fontModalLabel">Ø§ÙØ²ÙˆØ¯Ù† ÙÙˆÙ†Øª Ø¬Ø¯ÛŒØ¯</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¨Ø³ØªÙ†"></button>
          </div>
          <div class="modal-body">

            <input type="hidden" id="fontId" />

            <div class="mb-3">
              <label for="fontName" class="form-label">Ù†Ø§Ù… ÙÙˆÙ†Øª</label>
              <input type="text" class="form-control" id="fontName" required />
            </div>

            <div class="mb-3">
              <label for="fontFile" class="form-label">ÙØ§ÛŒÙ„ ÙÙˆÙ†Øª (TTF, OTF)</label>
              <input type="file" class="form-control" id="fontFile" accept=".ttf,.otf" />
              <small class="form-text text-muted">Ø¯Ø± Ù‡Ù†Ú¯Ø§Ù… ÙˆÛŒØ±Ø§ÛŒØ´ØŒ Ø§Ú¯Ø± ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´ÙˆØ¯ØŒ ÙØ§ÛŒÙ„ Ù‚Ø¨Ù„ÛŒ Ø­ÙØ¸ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</small>
            </div>

            <div class="mb-3">
              <label for="fontPrice" class="form-label">Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)</label>
              <input type="number" class="form-control" id="fontPrice" min="0" required />
            </div>

            <div class="mb-3">
              <label for="fontCategory" class="form-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
              <select id="fontCategory" class="form-select" required>
                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</option>
                <option value="Ø¯Ø³Øªâ€ŒÙ†ÙˆÛŒØ³">Ø¯Ø³Øªâ€ŒÙ†ÙˆÛŒØ³</option>
                <option value="Ø³Ø±ÛŒÙÛŒ">Ø³Ø±ÛŒÙÛŒ</option>
                <option value="Ø³Ø§Ù†Ø³â€ŒØ³Ø±ÛŒÙ">Ø³Ø§Ù†Ø³â€ŒØ³Ø±ÛŒÙ</option>
                <!-- Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ± Ø§ÛŒÙ†Ø¬Ø§ -->
              </select>
            </div>

            <div class="mb-3">
              <label for="fontDescription" class="form-label">ØªÙˆØ¶ÛŒØ­</label>
              <textarea id="fontDescription" rows="3" class="form-control"></textarea>
            </div>

            <div class="mb-3">
              <label for="fontPreview" class="form-label">Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ (URL ÛŒØ§ ØªØµÙˆÛŒØ±)</label>
              <input type="url" class="form-control" id="fontPreview" placeholder="Ø¢Ø¯Ø±Ø³ ØªØµÙˆÛŒØ± Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´" />
            </div>

            <div class="mb-3">
              <label class="form-label">ÙˆØ¶Ø¹ÛŒØª ÙÙˆÙ†Øª</label>
              <select id="fontStatus" class="form-select" required>
                <option value="Ø¹Ø§Ø¯ÛŒ">Ø¹Ø§Ø¯ÛŒ</option>
                <option value="Ø±Ø§ÛŒÚ¯Ø§Ù†">Ø±Ø§ÛŒÚ¯Ø§Ù†</option>
                <option value="ØªØ®ÙÛŒÙâ€ŒØ¯Ø§Ø±">ØªØ®ÙÛŒÙâ€ŒØ¯Ø§Ø±</option>
                <option value="ÙˆÛŒÚ˜Ù‡">ÙˆÛŒÚ˜Ù‡</option>
              </select>
            </div>

          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø§Ù†ØµØ±Ø§Ù</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Ø¨ÙˆØªâ€ŒØ§Ø³ØªØ±Ù¾ -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø¯ÛŒØ±ÛŒØª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ -->

  <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø¯ÛŒØ±ÛŒØª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ -->
  <script>
    const fonts = [
      {
        id: 1,
        name: "ÙÙˆÙ†Øª Ø¯Ø³Øªâ€ŒÙ†ÙˆÛŒØ³ Ø§ÛŒØ±Ø§Ù†ÛŒ",
        category: "Ø¯Ø³Øªâ€ŒÙ†ÙˆÛŒØ³",
        price: 45000,
        status: "ÙˆÛŒÚ˜Ù‡",
        preview: "https://via.placeholder.com/100x40?text=ÙÙˆÙ†Øª",
        description: "ÙÙˆÙ†Øª Ø²ÛŒØ¨Ø§ Ùˆ Ø§ÛŒØ±Ø§Ù†ÛŒ",
      },
      {
        id: 2,
        name: "ÙÙˆÙ†Øª Ø³Ø±ÛŒÙÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯",
        category: "Ø³Ø±ÛŒÙÛŒ",
        price: 35000,
        status: "Ø¹Ø§Ø¯ÛŒ",
        preview: "https://via.placeholder.com/100x40?text=ÙÙˆÙ†Øª",
        description: "ÙÙˆÙ†Øª Ø¨Ø§ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù„Ø§Ø³ÛŒÚ©",
      },
    ];

    // Ø±ÙØ±Ø´ Ø¬Ø¯ÙˆÙ„ ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¬Ø³ØªØ¬Ùˆ Ùˆ ÙÛŒÙ„ØªØ±
    function refreshTable() {
      const tbody = document.getElementById("fontsTableBody");
      const searchText = document.getElementById("searchInput").value.trim().toLowerCase();
      const filterCat = document.getElementById("filterCategory").value;
      const filterStatus = document.getElementById("filterStatus").value;

      tbody.innerHTML = "";

      let filtered = fonts.filter(f => {
        return (
          f.name.toLowerCase().includes(searchText) &&
          (filterCat === "" || f.category === filterCat) &&
          (filterStatus === "" || f.status === filterStatus)
        );
      });

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" class="text-center">Ù‡ÛŒÚ† ÙÙˆÙ†ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</td></tr>`;
        return;
      }

      filtered.forEach(f => {
        tbody.innerHTML += `
          <tr>
            <td>${f.name}</td>
            <td>${f.category}</td>
            <td>${f.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</td>
            <td>${f.status}</td>
            <td><img src="${f.preview}" alt="Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´" style="height:40px"/></td>
            <td>
              <button class="btn btn-sm btn-warning me-1" onclick="editFont(${f.id})">ÙˆÛŒØ±Ø§ÛŒØ´</button>
              <button class="btn btn-sm btn-danger" onclick="deleteFont(${f.id})">Ø­Ø°Ù</button>
            </td>
          </tr>
        `;
      });
    }

    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
    refreshTable();

    // Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ Ùˆ ÙÛŒÙ„ØªØ±
    document.getElementById("searchInput").addEventListener("input", refreshTable);
    document.getElementById("filterCategory").addEventListener("change", refreshTable);
    document.getElementById("filterStatus").addEventListener("change", refreshTable);

    // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ø¯Ø§Ù„ Ø§ÙØ²ÙˆØ¯Ù† ÙÙˆÙ†Øª
    const fontModal = new bootstrap.Modal(document.getElementById("fontModal"));
    const fontForm = document.getElementById("fontForm");
    const fontModalLabel = document.getElementById("fontModalLabel");

    function resetForm() {
      fontForm.reset();
      document.getElementById("fontId").value = "";
      fontModalLabel.textContent = "Ø§ÙØ²ÙˆØ¯Ù† ÙÙˆÙ†Øª Ø¬Ø¯ÛŒØ¯";
    }

    document.querySelector("button[ data-bs-target='#fontModal' ]").addEventListener("click", resetForm);

    // ØªØ§Ø¨Ø¹ ÙˆÛŒØ±Ø§ÛŒØ´ ÙÙˆÙ†Øª
    function editFont(id) {
      const font = fonts.find(f => f.id === id);
      if (!font) return alert("ÙÙˆÙ†Øª Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!");

      document.getElementById("fontId").value = font.id;
      document.getElementById("fontName").value = font.name;
      document.getElementById("fontPrice").value = font.price;
      document.getElementById("fontCategory").value = font.category;
      document.getElementById("fontDescription").value = font.description;
      document.getElementById("fontPreview").value = font.preview;
      document.getElementById("fontStatus").value = font.status;

      fontModalLabel.textContent = "ÙˆÛŒØ±Ø§ÛŒØ´ ÙÙˆÙ†Øª: " + font.name;
      fontModal.show();
    }

    // Ø­Ø°Ù ÙÙˆÙ†Øª
    function deleteFont(id) {
      if (confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† ÙÙˆÙ†Øª Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")) {
        const index = fonts.findIndex(f => f.id === id);
        if (index !== -1) {
          fonts.splice(index, 1);
          refreshTable();
          alert("ÙÙˆÙ†Øª Ø­Ø°Ù Ø´Ø¯.");
        }
      }
    }

    // Ø°Ø®ÛŒØ±Ù‡ (Ø§ÙØ²ÙˆØ¯Ù† ÛŒØ§ ÙˆÛŒØ±Ø§ÛŒØ´) ÙÙˆÙ†Øª
    fontForm.addEventListener("submit", e => {
      e.preventDefault();

      const id = document.getElementById("fontId").value;
      const name = document.getElementById("fontName").value.trim();
      const price = Number(document.getElementById("fontPrice").value);
      const category = document.getElementById("fontCategory").value;
      const description = document.getElementById("fontDescription").value.trim();
      const preview = document.getElementById("fontPreview").value.trim();
      const status = document.getElementById("fontStatus").value;

      if (!name || price < 0 || !category) {
        alert("Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.");
        return;
      }

      if (id) {
        // ÙˆÛŒØ±Ø§ÛŒØ´
        const font = fonts.find(f => f.id == id);
        if (!font) return alert("ÙÙˆÙ†Øª Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!");

        font.name = name;
        font.price = price;
        font.category = category;
        font.description = description;
        font.preview = preview || "https://via.placeholder.com/100x40?text=ÙÙˆÙ†Øª";
        font.status = status;
        // ÙØ§ÛŒÙ„ ÙÙˆÙ†Øª - Ø§ÛŒÙ†Ø¬Ø§ ØµØ±ÙØ§Ù‹ ÙØ±Ø¶ÛŒ Ú†ÙˆÙ† Ø¢Ù¾Ù„ÙˆØ¯ ÙˆØ§Ù‚Ø¹ÛŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ú©â€ŒØ§Ù†Ø¯ Ø¯Ø§Ø±Ù‡

      } else {
        // Ø§ÙØ²ÙˆØ¯Ù† Ø¬Ø¯ÛŒØ¯
        const newId = fonts.length ? fonts[fonts.length - 1].id + 1 : 1;
        fonts.push({
          id: newId,
          name,
          price,
          category,
          description,
          preview: preview || "https://via.placeholder.com/100x40?text=ÙÙˆÙ†Øª",
          status,
        });
      }

      refreshTable();
      fontModal.hide();
      alert("Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.");
    });
  </script>

</body>
</html>
