<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>مدیریت فونت‌ها</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap RTL -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />

  <!-- فونت وزیر -->
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" />

  <!-- استایل سفارشی -->
  <link rel="stylesheet" href="css/style.css" />
</head>
<body style="font-family: Vazir, sans-serif; background-color: #f8f9fa;">

  <!-- نوار بالا -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary px-3">
    <a class="navbar-brand text-white" href="index.html"> 📘 پنل مدیریت</a>
  </nav>

  <div class="container-fluid">
    <div class="row">
     <!-- سایدبار -->
      <div class="col-md-2 bg-white shadow-sm pt-4" style="min-height: 100vh;">
        <ul class="nav flex-column">
          <li class="nav-item"><a class="nav-link text-dark" href="index.html">داشبورد</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="fonts.html">مدیریت فونت‌ها</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="orders.html">سفارش‌ها</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="users.html">کاربران</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="comments.html">نظرات</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="discounts.html">کدهای تخفیف</a></li>
          <li class="nav-item"><a class="nav-link active" href="blog.html">وبلاگ</a></li>
       
        </ul>
      </div>

      <!-- محتوای اصلی -->
      <div class="col-md-10 p-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
          <h3 class="text-primary">مدیریت فونت‌ها</h3>
          <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#fontModal">+ افزودن فونت جدید</button>
        </div>

        <!-- جستجو و فیلتر -->
        <div class="row mb-3">
          <div class="col-md-6">
            <input id="searchInput" type="text" class="form-control" placeholder="جستجوی فونت..." />
          </div>
          <div class="col-md-3">
            <select id="filterCategory" class="form-select">
              <option value="">همه دسته‌ها</option>
              <option value="دست‌نویس">دست‌نویس</option>
              <option value="سریفی">سریفی</option>
              <option value="سانس‌سریف">سانس‌سریف</option>
              <!-- دسته‌های بیشتر اینجا -->
            </select>
          </div>
          <div class="col-md-3">
            <select id="filterStatus" class="form-select">
              <option value="">همه وضعیت‌ها</option>
              <option value="رایگان">رایگان</option>
              <option value="تخفیف‌دار">تخفیف‌دار</option>
              <option value="ویژه">ویژه</option>
            </select>
          </div>
        </div>

        <!-- جدول لیست فونت‌ها -->
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle">
            <thead class="table-primary">
              <tr>
                <th>نام فونت</th>
                <th>دسته‌بندی</th>
                <th>قیمت</th>
                <th>وضعیت</th>
                <th>پیش‌نمایش</th>
                <th>عملیات</th>
              </tr>
            </thead>
            <tbody id="fontsTableBody">
              <!-- داده‌های فونت‌ها اینجا قرار می‌گیرند -->
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>

  <!-- مدال افزودن/ویرایش فونت -->
  <div class="modal fade" id="fontModal" tabindex="-1" aria-labelledby="fontModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <form id="fontForm" enctype="multipart/form-data">
          <div class="modal-header">
            <h5 class="modal-title" id="fontModalLabel">افزودن فونت جدید</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
          </div>
          <div class="modal-body">

            <input type="hidden" id="fontId" />

            <div class="mb-3">
              <label for="fontName" class="form-label">نام فونت</label>
              <input type="text" class="form-control" id="fontName" required />
            </div>

            <div class="mb-3">
              <label for="fontFile" class="form-label">فایل فونت (TTF, OTF)</label>
              <input type="file" class="form-control" id="fontFile" accept=".ttf,.otf" />
              <small class="form-text text-muted">در هنگام ویرایش، اگر فایل جدید انتخاب نشود، فایل قبلی حفظ می‌شود.</small>
            </div>

            <div class="mb-3">
              <label for="fontPrice" class="form-label">قیمت (تومان)</label>
              <input type="number" class="form-control" id="fontPrice" min="0" required />
            </div>

            <div class="mb-3">
              <label for="fontCategory" class="form-label">دسته‌بندی</label>
              <select id="fontCategory" class="form-select" required>
                <option value="">انتخاب دسته‌بندی</option>
                <option value="دست‌نویس">دست‌نویس</option>
                <option value="سریفی">سریفی</option>
                <option value="سانس‌سریف">سانس‌سریف</option>
                <!-- دسته‌های بیشتر اینجا -->
              </select>
            </div>

            <div class="mb-3">
              <label for="fontDescription" class="form-label">توضیح</label>
              <textarea id="fontDescription" rows="3" class="form-control"></textarea>
            </div>

            <div class="mb-3">
              <label for="fontPreview" class="form-label">پیش‌نمایش (URL یا تصویر)</label>
              <input type="url" class="form-control" id="fontPreview" placeholder="آدرس تصویر پیش‌نمایش" />
            </div>

            <div class="mb-3">
              <label class="form-label">وضعیت فونت</label>
              <select id="fontStatus" class="form-select" required>
                <option value="عادی">عادی</option>
                <option value="رایگان">رایگان</option>
                <option value="تخفیف‌دار">تخفیف‌دار</option>
                <option value="ویژه">ویژه</option>
              </select>
            </div>

          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">ذخیره</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">انصراف</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- بوت‌استرپ -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- اسکریپت مدیریت فونت‌ها -->

  <!-- اسکریپت مدیریت فونت‌ها -->
  <script>
    const fonts = [
      {
        id: 1,
        name: "فونت دست‌نویس ایرانی",
        category: "دست‌نویس",
        price: 45000,
        status: "ویژه",
        preview: "https://via.placeholder.com/100x40?text=فونت",
        description: "فونت زیبا و ایرانی",
      },
      {
        id: 2,
        name: "فونت سریفی استاندارد",
        category: "سریفی",
        price: 35000,
        status: "عادی",
        preview: "https://via.placeholder.com/100x40?text=فونت",
        description: "فونت با طراحی کلاسیک",
      },
    ];

    // رفرش جدول فونت‌ها بر اساس جستجو و فیلتر
    function refreshTable() {
      const tbody = document.getElementById("fontsTableBody");
      const searchText = document.getElementById("searchInput").value.trim().toLowerCase();
      const filterCat = document.getElementById("filterCategory").value;
      const filterStatus = document.getElementById("filterStatus").value;

      tbody.innerHTML = "";

      let filtered = fonts.filter(f => {
        return (
          f.name.toLowerCase().includes(searchText) &&
          (filterCat === "" || f.category === filterCat) &&
          (filterStatus === "" || f.status === filterStatus)
        );
      });

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" class="text-center">هیچ فونتی یافت نشد.</td></tr>`;
        return;
      }

      filtered.forEach(f => {
        tbody.innerHTML += `
          <tr>
            <td>${f.name}</td>
            <td>${f.category}</td>
            <td>${f.price.toLocaleString()} تومان</td>
            <td>${f.status}</td>
            <td><img src="${f.preview}" alt="پیش‌نمایش" style="height:40px"/></td>
            <td>
              <button class="btn btn-sm btn-warning me-1" onclick="editFont(${f.id})">ویرایش</button>
              <button class="btn btn-sm btn-danger" onclick="deleteFont(${f.id})">حذف</button>
            </td>
          </tr>
        `;
      });
    }

    // بارگذاری اولیه
    refreshTable();

    // رویدادهای جستجو و فیلتر
    document.getElementById("searchInput").addEventListener("input", refreshTable);
    document.getElementById("filterCategory").addEventListener("change", refreshTable);
    document.getElementById("filterStatus").addEventListener("change", refreshTable);

    // باز کردن مدال افزودن فونت
    const fontModal = new bootstrap.Modal(document.getElementById("fontModal"));
    const fontForm = document.getElementById("fontForm");
    const fontModalLabel = document.getElementById("fontModalLabel");

    function resetForm() {
      fontForm.reset();
      document.getElementById("fontId").value = "";
      fontModalLabel.textContent = "افزودن فونت جدید";
    }

    document.querySelector("button[ data-bs-target='#fontModal' ]").addEventListener("click", resetForm);

    // تابع ویرایش فونت
    function editFont(id) {
      const font = fonts.find(f => f.id === id);
      if (!font) return alert("فونت پیدا نشد!");

      document.getElementById("fontId").value = font.id;
      document.getElementById("fontName").value = font.name;
      document.getElementById("fontPrice").value = font.price;
      document.getElementById("fontCategory").value = font.category;
      document.getElementById("fontDescription").value = font.description;
      document.getElementById("fontPreview").value = font.preview;
      document.getElementById("fontStatus").value = font.status;

      fontModalLabel.textContent = "ویرایش فونت: " + font.name;
      fontModal.show();
    }

    // حذف فونت
    function deleteFont(id) {
      if (confirm("آیا از حذف این فونت مطمئن هستید؟")) {
        const index = fonts.findIndex(f => f.id === id);
        if (index !== -1) {
          fonts.splice(index, 1);
          refreshTable();
          alert("فونت حذف شد.");
        }
      }
    }

    // ذخیره (افزودن یا ویرایش) فونت
    fontForm.addEventListener("submit", e => {
      e.preventDefault();

      const id = document.getElementById("fontId").value;
      const name = document.getElementById("fontName").value.trim();
      const price = Number(document.getElementById("fontPrice").value);
      const category = document.getElementById("fontCategory").value;
      const description = document.getElementById("fontDescription").value.trim();
      const preview = document.getElementById("fontPreview").value.trim();
      const status = document.getElementById("fontStatus").value;

      if (!name || price < 0 || !category) {
        alert("لطفاً همه فیلدهای ضروری را پر کنید.");
        return;
      }

      if (id) {
        // ویرایش
        const font = fonts.find(f => f.id == id);
        if (!font) return alert("فونت پیدا نشد!");

        font.name = name;
        font.price = price;
        font.category = category;
        font.description = description;
        font.preview = preview || "https://via.placeholder.com/100x40?text=فونت";
        font.status = status;
        // فایل فونت - اینجا صرفاً فرضی چون آپلود واقعی نیاز به بک‌اند داره

      } else {
        // افزودن جدید
        const newId = fonts.length ? fonts[fonts.length - 1].id + 1 : 1;
        fonts.push({
          id: newId,
          name,
          price,
          category,
          description,
          preview: preview || "https://via.placeholder.com/100x40?text=فونت",
          status,
        });
      }

      refreshTable();
      fontModal.hide();
      alert("عملیات با موفقیت انجام شد.");
    });
  </script>

</body>
</html>
