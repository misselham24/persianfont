<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† - Ù†Ø¸Ø±Ø§Øª Ùˆ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯Ù‡Ø§</title>
  <!-- Ø¨ÙˆØªâ€ŒØ§Ø³ØªØ±Ù¾ RTL -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <!-- ÙÙˆÙ†Øª ÙØ§Ø±Ø³ÛŒ ÙˆØ²ÛŒØ± -->
  <link href="https://cdn.fontcdn.ir/woff/woff2/Vazir-font.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
  <style>

    /* Ø¬Ø¯ÙˆÙ„ */
    table th, table td {
      vertical-align: middle;
    }
    /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
    .btn-sm {
      padding: 0.25rem 0.5rem;
      font-size: 0.85rem;
    }
    /* Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ù…ØªÛŒØ§Ø² */
    .star {
      color: gold;
      font-size: 1.2rem;
      cursor: pointer;
    }
    .star.gray {
      color: #ccc;
    }
    /* Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ù†Ø¸Ø± */
    .reply-box {
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
 <!-- Ù†ÙˆØ§Ø± Ø¨Ø§Ù„Ø§ -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary px-3">
    <a class="navbar-brand text-white" href="index.html"> ğŸ“˜ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</a>
  </nav>

  <div class="container-fluid">
    <div class="row">
    <!-- Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± -->
      <div class="col-md-2 bg-white shadow-sm pt-4" style="min-height: 100vh;">
        <ul class="nav flex-column">
          <li class="nav-item"><a class="nav-link text-dark" href="index.html">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="fonts.html">Ù…Ø¯ÛŒØ±ÛŒØª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="orders.html">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="users.html">Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="comments.html">Ù†Ø¸Ø±Ø§Øª</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="discounts.html">Ú©Ø¯Ù‡Ø§ÛŒ ØªØ®ÙÛŒÙ</a></li>
          <li class="nav-item"><a class="nav-link active" href="blog.html">ÙˆØ¨Ù„Ø§Ú¯</a></li>
       
        </ul>
      </div>

      <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
      <main class="col-md-10 pt-4">
        <h2 class="mb-4">Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ø¸Ø±Ø§Øª Ùˆ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯Ù‡Ø§</h2>

        <!-- Ø¬Ø¯ÙˆÙ„ Ù†Ø¸Ø±Ø§Øª -->
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-primary">
              <tr>
                <th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±</th>
                <th>Ù…Ø­ØµÙˆÙ„</th>
                <th>Ù†Ø¸Ø±</th>
                <th>Ø§Ù…ØªÛŒØ§Ø²</th>
                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                <th>Ø§Ù‚Ø¯Ø§Ù…Ø§Øª</th>
              </tr>
            </thead>
            <tbody id="commentsTableBody">
              <!-- Ù†Ø¸Ø±Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù†Ø¯Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
            </tbody>
          </table>
        </div>
      </main>
    </div>
  </div>

  <!-- Ù…Ø¯Ø§Ù„ Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ù†Ø¸Ø± -->
  <div
    class="modal fade"
    id="replyModal"
    tabindex="-1"
    aria-labelledby="replyModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="replyModalLabel">Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ù†Ø¸Ø±</h5>
          <button
            type="button"
            class="btn-close btn-close-white"
            data-bs-dismiss="modal"
            aria-label="Ø¨Ø³ØªÙ†"
          ></button>
        </div>
        <div class="modal-body">
          <textarea
            id="replyText"
            class="form-control"
            rows="4"
            placeholder="Ù…ØªÙ† Ù¾Ø§Ø³Ø® Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..."
          ></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Ù„ØºÙˆ
          </button>
          <button type="button" class="btn btn-primary" onclick="submitReply()">
            Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø®
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
  <script>
    // Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Ù†Ø¸Ø±Ø§Øª
    const comments = [
      {
        id: 1,
        userName: "Ø±Ø¶Ø§ Ø±Ø¶Ø§ÛŒÛŒ",
        product: "ÙÙˆÙ†Øª Ù†Ø³ØªØ¹Ù„ÛŒÙ‚",
        text: "ÙÙˆÙ†Øª Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ Ùˆ Ø²ÛŒØ¨Ø§Ø³ØªØŒ Ù…Ù…Ù†ÙˆÙ†!",
        rating: 5,
        status: "Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±",
        reply: null,
      },
      {
        id: 2,
        userName: "Ù…ÛŒÙ†Ø§ Ø§Ø­Ù…Ø¯ÛŒ",
        product: "ÙÙˆÙ†Øª ÙˆØ²ÛŒØ±",
        text: "Ú©ÛŒÙÛŒØª ÙÙˆÙ†Øª Ø®ÙˆØ¨Ù‡ ÙˆÙ„ÛŒ Ù‚ÛŒÙ…ØªØ´ Ø¨Ø§Ù„Ø§Ø³Øª.",
        rating: 3,
        status: "ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡",
        reply: "Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ù†Ø¸Ø± Ø´Ù…Ø§ØŒ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ù‚ÛŒÙ…Øª Ù…Ù†Ø§Ø³Ø¨â€ŒØªØ± Ø´ÙˆØ¯.",
      },
      {
        id: 3,
        userName: "Ø³Ø§Ø±Ø§ Ù…ÙˆØ³ÙˆÛŒ",
        product: "ÙÙˆÙ†Øª Ø§ÛŒØ±Ø§Ù†â€ŒØ³Ù†Ø³",
        text: "Ø§Ù…ØªÛŒØ§Ø² Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø±Ù‡ ÙˆÙ„ÛŒ Ø§Ù†ØªØ¸Ø§Ø± Ú©ÛŒÙÛŒØª Ø¨Ù‡ØªØ± Ø¯Ø§Ø´ØªÙ….",
        rating: 4,
        status: "Ø±Ø¯ Ø´Ø¯Ù‡",
        reply: null,
      },
    ];

    let currentReplyId = null;

    // Ø±Ù†Ø¯Ø± Ù„ÛŒØ³Øª Ù†Ø¸Ø±Ø§Øª
    function renderComments() {
      const tbody = document.getElementById("commentsTableBody");
      tbody.innerHTML = "";
      if (comments.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" class="text-center">Ù‡ÛŒÚ† Ù†Ø¸Ø±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td></tr>`;
        return;
      }
      comments.forEach((c) => {
        tbody.innerHTML += `
          <tr>
            <td>${c.userName}</td>
            <td>${c.product}</td>
            <td>
              ${c.text}
              ${
                c.reply
                  ? `<div class="reply-box mt-2 p-2 border rounded bg-light"><strong>Ù¾Ø§Ø³Ø® Ø§Ø¯Ù…ÛŒÙ†:</strong> ${c.reply}</div>`
                  : ""
              }
            </td>
            <td>${renderStars(c.rating)}</td>
            <td>${c.status}</td>
            <td>
              ${
                c.status === "Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±"
                  ? `<button class="btn btn-success btn-sm me-1" onclick="changeStatus(${c.id}, 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡')">ØªØ£ÛŒÛŒØ¯</button>
                     <button class="btn btn-warning btn-sm me-1" onclick="changeStatus(${c.id}, 'Ø±Ø¯ Ø´Ø¯Ù‡')">Ø±Ø¯</button>`
                  : ""
              }
              <button class="btn btn-info btn-sm me-1" onclick="openReplyModal(${c.id})">Ù¾Ø§Ø³Ø®</button>
              <button class="btn btn-danger btn-sm" onclick="deleteComment(${c.id})">Ø­Ø°Ù</button>
            </td>
          </tr>
        `;
      });
    }

    // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ
    function renderStars(rating) {
      let starsHTML = "";
      for (let i = 1; i <= 5; i++) {
        starsHTML += i <= rating ? "â˜…" : "â˜†";
      }
      return `<span style="color:gold; font-size:1.2rem;">${starsHTML}</span>`;
    }

    // ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ù†Ø¸Ø±
    function changeStatus(id, newStatus) {
      const c = comments.find((c) => c.id === id);
      if (!c) return;
      c.status = newStatus;
      renderComments();
      alert("ÙˆØ¶Ø¹ÛŒØª Ù†Ø¸Ø± Ø¨Ù‡ " + newStatus + " ØªØºÛŒÛŒØ± Ú©Ø±Ø¯.");
    }

    // Ø­Ø°Ù Ù†Ø¸Ø±
    function deleteComment(id) {
      if (!confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù†Ø¸Ø± Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")) return;
      const index = comments.findIndex((c) => c.id === id);
      if (index !== -1) {
        comments.splice(index, 1);
        renderComments();
        alert("Ù†Ø¸Ø± Ø­Ø°Ù Ø´Ø¯.");
      }
    }

    // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ø¯Ø§Ù„ Ù¾Ø§Ø³Ø®
    function openReplyModal(id) {
      currentReplyId = id;
      const comment = comments.find((c) => c.id === id);
      if (!comment) return;
      document.getElementById("replyText").value = comment.reply || "";
      const replyModal = new bootstrap.Modal(document.getElementById("replyModal"));
      replyModal.show();
    }

    // Ø«Ø¨Øª Ù¾Ø§Ø³Ø®
    function submitReply() {
      const text = document.getElementById("replyText").value.trim();
      if (currentReplyId === null) return;
      const comment = comments.find((c) => c.id === currentReplyId);
      if (!comment) return;
      comment.reply = text || null;
      renderComments();
      const replyModalEl = document.getElementById("replyModal");
      const modal = bootstrap.Modal.getInstance(replyModalEl);
      modal.hide();
      alert("Ù¾Ø§Ø³Ø® Ø«Ø¨Øª Ø´Ø¯.");
    }

    // Ø±Ù†Ø¯Ø± Ø§ÙˆÙ„ÛŒÙ‡
    renderComments();
  </script>
</body>
</html>
