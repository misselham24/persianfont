<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>پنل ادمین - مدیریت کاربران</title>
  <!-- بوت‌استرپ RTL -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <!-- فونت فارسی وزیر (یا هر فونت دلخواه) -->
  <link href="https://cdn.fontcdn.ir/woff/woff2/ Vazir-font.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Vazir', Tahoma, sans-serif;
      background-color: #f8f9fa;
      color: #0d6efd;
    }
  

    /* جدول */
    table th, table td {
      vertical-align: middle;
    }
    /* دکمه‌ها */
    .btn-sm {
      padding: 0.25rem 0.5rem;
      font-size: 0.85rem;
    }
    /* فرم جستجو */
    .search-box {
      max-width: 350px;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <!-- هدر -->
   <nav class="navbar navbar-expand-lg navbar-dark bg-primary px-3">
    <a class="navbar-brand text-white" href="#">📘 پنل مدیریت</a>
  </nav>

  <div class="container-fluid">
    <div class="row">
   <!-- سایدبار -->
      <div class="col-md-2 bg-white shadow-sm pt-4" style="min-height: 100vh;">
        <ul class="nav flex-column">
          <li class="nav-item"><a class="nav-link text-dark" href="index.html">داشبورد</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="fonts.html">مدیریت فونت‌ها</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="orders.html">سفارش‌ها</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="users.html">کاربران</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="comments.html">نظرات</a></li>
          <li class="nav-item"><a class="nav-link text-dark" href="discounts.html">کدهای تخفیف</a></li>
          <li class="nav-item"><a class="nav-link active" href="blog.html">وبلاگ</a></li>
       
        </ul>
      </div>

      <!-- محتوای اصلی -->
      <main class="col-md-10 pt-4">
        <h2 class="mb-4">مدیریت کاربران</h2>

        <!-- جستجو -->
        <input
          type="text"
          class="form-control search-box"
          id="searchInput"
          placeholder="جستجو بر اساس نام یا ایمیل..."
          onkeyup="filterUsers()"
        />

        <!-- جدول کاربران -->
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-primary">
              <tr>
                <th>نام</th>
                <th>ایمیل</th>
                <th>نقش</th>
                <th>اقدامات</th>
              </tr>
            </thead>
            <tbody id="usersTableBody">
              <!-- داده های کاربران اینجا رندر می‌شود -->
            </tbody>
          </table>
        </div>
      </main>
    </div>
  </div>

  <!-- مدال مشاهده جزئیات کاربر -->
  <div
    class="modal fade"
    id="userDetailModal"
    tabindex="-1"
    aria-labelledby="userDetailModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="userDetailModalLabel">جزئیات کاربر</h5>
          <button
            type="button"
            class="btn-close btn-close-white"
            data-bs-dismiss="modal"
            aria-label="بستن"
          ></button>
        </div>
        <div class="modal-body" id="userDetailContent">
          <!-- اطلاعات کاربر اینجا بارگذاری می‌شود -->
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            بستن
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- اسکریپت‌ها -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
  <script>
    // نمونه داده کاربران
    const users = [
      {
        id: 1,
        name: "رضا رضایی",
        email: "reza@example.com",
        role: "مدیر",
        phone: "09121234567",
        registered: "1402/12/01",
        status: "فعال",
      },
      {
        id: 2,
        name: "مینا احمدی",
        email: "mina@example.com",
        role: "کاربر عادی",
        phone: "09127654321",
        registered: "1402/11/15",
        status: "مسدود",
      },
      {
        id: 3,
        name: "سارا موسوی",
        email: "sara@example.com",
        role: "کاربر عادی",
        phone: "09129876543",
        registered: "1402/10/20",
        status: "فعال",
      },
    ];

    // تابع رندر لیست کاربران
    function renderUsersList(filteredUsers = users) {
      const tbody = document.getElementById("usersTableBody");
      tbody.innerHTML = "";
      if (filteredUsers.length === 0) {
        tbody.innerHTML =
          `<tr><td colspan="4" class="text-center">کاربری یافت نشد</td></tr>`;
        return;
      }
      filteredUsers.forEach((user) => {
        tbody.innerHTML += `
          <tr>
            <td>${user.name}</td>
            <td>${user.email}</td>
            <td>${user.role}</td>
            <td>
              <button class="btn btn-info btn-sm me-1" onclick="showUserDetails(${user.id})">جزئیات</button>
              <button class="btn btn-warning btn-sm me-1" onclick="toggleUserStatus(${user.id})">
                ${user.status === "فعال" ? "مسدود کردن" : "فعال کردن"}
              </button>
              <button class="btn btn-danger btn-sm" onclick="deleteUser(${user.id})">حذف</button>
            </td>
          </tr>
        `;
      });
    }

    // تابع فیلتر کاربران با جستجو
    function filterUsers() {
      const query = document.getElementById("searchInput").value.trim().toLowerCase();
      const filtered = users.filter(
        (u) =>
          u.name.toLowerCase().includes(query) ||
          u.email.toLowerCase().includes(query)
      );
      renderUsersList(filtered);
    }

    // نمایش جزئیات کاربر در مدال
    function showUserDetails(userId) {
      const user = users.find((u) => u.id === userId);
      if (!user) return;
      const modalBody = document.getElementById("userDetailContent");
      modalBody.innerHTML = `
        <p><strong>نام:</strong> ${user.name}</p>
        <p><strong>ایمیل:</strong> ${user.email}</p>
        <p><strong>شماره تماس:</strong> ${user.phone}</p>
        <p><strong>تاریخ ثبت‌نام:</strong> ${user.registered}</p>
        <p><strong>نقش:</strong> ${user.role}</p>
        <p><strong>وضعیت:</strong> ${user.status}</p>
      `;
      // نمایش مدال
      const modal = new bootstrap.Modal(document.getElementById("userDetailModal"));
      modal.show();
    }

    // مسدود / فعال کردن کاربر
    function toggleUserStatus(userId) {
      const user = users.find((u) => u.id === userId);
      if (!user) return;
      user.status = user.status === "فعال" ? "مسدود" : "فعال";
      renderUsersList();
    }

    // حذف کاربر با تأییدیه
    function deleteUser(userId) {
      if (!confirm("آیا از حذف این کاربر مطمئن هستید؟")) return;
      const index = users.findIndex((u) => u.id === userId);
      if (index !== -1) {
        users.splice(index, 1);
        renderUsersList();
      }
    }

    // بارگذاری اولیه لیست
    renderUsersList();
  </script>
</body>
</html>
